---
// Assets
import { Image } from "astro:assets";
// Fundations
import BaseLayout from "@/layouts/BaseLayout.astro";
import Text from "@/components/fundations/elements/Text.astro";
import Wrapper from "@/components/fundations/containers/Wrapper.astro";
// Components
import BlogEntries1 from "@/components/blog/BlogEntries.astro";
// Load all posts
import { getCollection } from "astro:content";
// Content
const allPosts = await getCollection("posts");
// Get the team slug from the URL
const teamSlug = Astro.url.pathname.split("/").filter(Boolean).pop();
// Filter posts by this team (based on slug)
const relatedPosts = allPosts.filter((post) => post.data.team === teamSlug);
const { frontmatter } = Astro.props;
---

<BaseLayout>
  <section>
    <Wrapper variant="standard" class="fixed z-40 top-[3.8rem] inset-x-0">
      <div
        
        class="w-full py-4 pr-4 bg-white border-b border-base-200"
      >
        {/* Social Media Links */}
        {
          frontmatter.socials && (
            <div class="flex items-center gap-2">
              {frontmatter.socials.twitter && (
                <a
                  href={frontmatter.socials.twitter}
                  class="text-sm text-base-600 hover:text-base-800 duration-300"
                  aria-label="X"
                >
                  Twitter
                </a>
              )}
              {frontmatter.socials.linkedin && (
                <a
                  href={frontmatter.socials.linkedin}
                  class="text-sm text-base-600 hover:text-base-800 duration-300"
                  aria-label="LinkedIn"
                >
                  Linkedin
                </a>
              )}
              {frontmatter.socials.email && (
                <a
                  href={frontmatter.socials.email}
                  class="text-sm text-base-600 hover:text-base-800 duration-300"
                  aria-label="Email"
                >
                  Email
                </a>
              )}
              {frontmatter.socials.website && (
                <a
                  href={frontmatter.socials.website}
                  class="text-sm text-base-600 hover:text-base-800 duration-300"
                  aria-label="Website"
                >
                  Website
                </a>
              )}
            </div>
          )
        }
      </div>
    </Wrapper>
    <Wrapper variant="standard" class="pt-48 pb-8 lg:pt-82">
      <div>
        <Text tag="h1" variant="displayLG" class="text-base-800">
          {frontmatter.name}
        </Text>
        {
          frontmatter.role && (
            <Text
              tag="p"
              variant="textBase"
              class="mt-4 text-balance text-base-500 "
            >
              {frontmatter.role}
            </Text>
          )
        }
       
      </div>
      <Image
        width={1000}
        height={800}
        alt={frontmatter.image.alt}
        src={frontmatter.image.url}
        class="object-cover object-center pt-8 mt-8 border-t size-full max-h-120 border-base-200 "
      />
     
        {
          frontmatter.bio && (
            <div class="flex flex-col max-w-sm mt-4 gap-2">
              {frontmatter.bio.split("\n").map((paragraph) => (
                <Text tag="p" variant="textBase" class="text-base-500">
                  {paragraph}
                </Text>
              ))}
            </div>
          )
        }
    </Wrapper>
  </section>
  <section>
    <Wrapper variant="standard" class="py-12 lg:pb-24">
      <div class="">
        {
          relatedPosts.length > 0 && (
            <div>
              <Text tag="h2" variant="displaySM" class="text-base-800">
                More posts from{" "}
                <span class="capitalize">{teamSlug.replace(/-/g, " ")}</span>
              </Text>

              <div class="mt-2 grid grid-cols-1 gap-8 md:grid-cols-2 lg:grid-cols-3">
                {relatedPosts.map((post) => (
                  <BlogEntries1 post={post} />
                ))}
              </div>
            </div>
          )
        }
      </div>
    </Wrapper>
  </section>
</BaseLayout>
